<div class="modal fade" id="xrayModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <form id="xrayForm" class="modal-content glass-panel border-0 p-0">
            <div class="modal-header border-0 border-bottom border-secondary">
                <h5 class="modal-title fw-bold text-primary-neon">
                    <i class="fas fa-microchip me-2"></i>XRAY ADVANCED CORE
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            
            <div class="modal-body p-4" style="max-height: 80vh; overflow-y: auto;">
                <div class="glass-card p-3 mb-3">
                    <h6 class="text-primary-neon small fw-bold mb-3">IDENTITY & BASE</h6>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="small text-muted">REMARK</label>
                            <input name="remark" class="form-control" placeholder="Slytherin-User-01">
                        </div>
                        <div class="col-md-6">
                            <label class="small text-muted">PROTOCOL</label>
                            <select name="protocol" class="form-select">
                                <option value="vless">VLESS</option>
                                <option value="vmess">VMess</option>
                                <option value="trojan">Trojan</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="small text-muted">PORT</label>
                            <input name="port" type="number" class="form-control" value="443">
                        </div>
                        <div class="col-md-8">
                            <label class="small text-muted">UUID / AUTH</label>
                            <input name="uuid" class="form-control font-monospace" placeholder="Click to Generate">
                        </div>
                    </div>
                </div>

                <div class="accordion" id="xrayAccordion">
                    
                    <div class="accordion-item glass-card bg-transparent">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSock">
                                <i class="fas fa-network-wired me-2"></i> Transmission & Sockopt
                            </button>
                        </h2>
                        <div id="collapseSock" class="accordion-collapse collapse" data-bs-parent="#xrayAccordion">
                            <div class="accordion-body grid grid-cols-1 gap-3">
                                <div class="row g-2">
                                    <div class="col-6"><input name="tcp_congestion" class="form-control form-control-sm" placeholder="TCP Congestion (bbr)"></div>
                                    <div class="col-6"><input name="tcp_tfo" type="checkbox" class="form-check-input me-2"> <span class="small">TCP Fast Open</span></div>
                                </div>
                                <div class="mt-2">
                                    <label class="small text-muted">DOMAIN STRATEGY</label>
                                    <select name="domain_strategy" class="form-select form-select-sm">
                                        <option value="AsIs">AsIs</option>
                                        <option value="UseIP">UseIP</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item glass-card bg-transparent">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSecurity">
                                <i class="fas fa-shield-alt me-2"></i> Security (Reality / TLS)
                            </button>
                        </h2>
                        <div id="collapseSecurity" class="accordion-collapse collapse" data-bs-parent="#xrayAccordion">
                            <div class="accordion-body">
                                <div class="mb-3">
                                    <label class="small text-muted">SECURITY TYPE</label>
                                    <select name="security" class="form-select form-select-sm" onchange="toggleSecurityUI(this.value)">
                                        <option value="none">None</option>
                                        <option value="tls">TLS</option>
                                        <option value="reality">REALITY</option>
                                    </select>
                                </div>
                                <div id="realityFields" class="d-none space-y-2">
                                    <input name="reality_dest" class="form-control form-control-sm mb-2" placeholder="Dest (e.g. google.com:443)">
                                    <input name="reality_sni" class="form-control form-control-sm mb-2" placeholder="Server Names (SNI)">
                                    <input name="reality_privkey" class="form-control form-control-sm" placeholder="Private Key">
                                </div>
                            </div>
                        </div>
                    </div>

                </div> </div>

            <div class="modal-footer border-0 p-4">
                <button type="button" class="btn btn-glass w-100" onclick="submitXray()">INITIALIZE DEPLOYMENT</button>
            </div>
        </form>
    </div>
</div>